<!doctype html>

<html lang="en" class="no-js">

<head>
	<meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>CoCo Conference Room</title>
	<meta name="description" content="description">
	<meta name="author" content="author">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="Client/css/style2.css">

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
	
	<script src="https://conference.eastus.cloudapp.azure.com/RocConf/lib/bower_components/webrtc-adapter/adapter.js"></script>
	<script src="https://cdn.socket.io/socket.io-1.0.6.js"></script>

	<script src="https://download.affectiva.com/js/3.1/affdex.js"></script>
	<script src="https://cdn.webrtc-experiment.com/RecordRTC.js"></script>
	<script src="Client/js_experiment/recording.js"></script>
	<script src="Client/js_experiment/startup.js"></script>
	<script src="Client/js_experiment/session-two.js"></script>

</head>

<body onload='init()'>
	<header>
		<img src="Client/images/coco.png" id="header_image" alt="">
		<div id="header_text">Conference Room <button id="end_call_button" onClick="proposeStop()">End Call</button></div>
	</header>

	<!--Modal-->
	<div id="uploadingModal" class="modal">
		<!--Modal Content-->
		<div class="modal-content">
			<p>Uploading Session Data...</p>
			<p>Please fill out the survey below while waiting!</p>
			<p><a href="https://docs.google.com/forms/d/e/1FAIpQLSdTEiO49G3Y0uRMXAoPWoefOaiWjX0qrZno-IRNYjUWDmxpTA/viewform" target="_new">Conference Survey</a></p>
		</div>
		<div class="loader"></div>
	</div>
	<div id="experimentModal" class="modal">
		<!--Modal Content-->
		<div class="modal-content">
			<p>Waiting for others to submit answers...</p>
		</div>
		<div class="loader"></div>
	</div>
	<div id="selectionModal" class="modal">
		<div class="modal-content">
			<ul id="sortable">

			</ul>
		</div>
		<button id="getResults" onclick="getResults()">Submit Results</button>
	</div>

	<div id="session_wrapper">
		<div id="main_div">
			<input type="hidden" id="focus_target"/>
			<div id="focus_feed"></div>
		</div>
		<div id="background_feeds">
			<span id="remote_videos"></span>
		</div>
	</div>

	<div id="users_priority_list"></div>

	<div id="affdex_data"></div>
</body>

<script src="Client/js/affdexheadtrack.js"></script>
<script src="Client/js/focus.js"></script>
<script>
	var selection_options = ["Box of matches","Food concentrate","Fifty feet of nylon rope",
	                         "Parachute silk","Solar-powered portable heating unit","Two .45 caliber pistols",
							 "One case of Pet milk","Two 100-pound tanks of oxygen","Stellar map (of the moon's constellations)",
							 "Self-inflating life raft","Magnetic compass","5 gallons of water","Signal flares",
							 "First-aid kit injection needles","Solar-powered FM receiver-transmitter"];

	var selectionDiv = $( "#sortable" )
	for(var i = 0; i < selection_options.length; i++)
	{
		selectionDiv.append( "<li class='ui-state-default' id='"+i+"'><span class='ui-icon ui-icon-arrowthick-2-n-s'></span>"+selection_options[i]+"</li>");
	}

	$( "#sortable" ).sortable();
    $( "#sortable" ).disableSelection();

    function getResults()
    {
	   	var rawSelection = $( "#sortable" ).sortable( "toArray" );
	   	var cleanSelection = [];
	   	for(var i = 0; i < rawSelection.length; i++)
	   	{
	   		cleanSelection.push({"item":selection_options[rawSelection[i]],"rank":i});

	   	}

	   	console.log(cleanSelection);
	   	submit_answers(cleanSelection);
	}

</script>

</html>
